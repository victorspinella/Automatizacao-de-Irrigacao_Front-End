import{a as h,_ as B}from"./axios-config.7911fab8.js";import{_ as V,r as s,c as p,b as q,a,x as y,y as b,A as w,q as N,s as E,v as g,F as C,z as $,o as _,t as n,p as T,e as M}from"./entry.acdcd3de.js";import"./axios.3a76d256.js";const u=f=>(T("data-v-3d0ef288"),f=f(),M(),f),R={class:"page-container"},G=u(()=>a("br",null,null,-1)),H={class:"botoesIncluiExclui"},j=["disabled"],J=["onSubmit"],K=u(()=>a("label",{for:"nome"},"Nome: ",-1)),O=u(()=>a("label",{for:"localizacao"},"Localização: ",-1)),P=u(()=>a("label",{for:"capacidade"},"Capacidade: ",-1)),Q=["disabled"],W={key:1,class:"table-container"},X={class:"custom-table"},Y=u(()=>a("thead",null,[a("tr",null,[a("th",null,[a("input",{type:"checkbox"})]),a("th",null,"ID estufa"),a("th",null,"Nome"),a("th",null,"Localização"),a("th",null,"Capacidade"),a("th",null,"Temperatura"),a("th",null,"Umidade"),a("th",null,"Consumo"),a("th",null,"Data Inclusão")])],-1)),Z=u(()=>a("td",null,[a("input",{type:"checkbox"})],-1)),aa=["onClick"],ta=u(()=>a("br",null,null,-1)),ea=u(()=>a("br",null,null,-1)),k="http://localhost:4000",oa={__name:"status",setup(f){const v=s([]),m=async()=>{try{const e=await h.get(`${k}/estufas`);console.log(e),v.value=e.data}catch(e){e.response.status===401&&window.alert("Usuário não autenticado"),console.error("Erro ao buscar dados:",e)}},z=async e=>{try{const o=await h.delete(`${k}/deleteestufa/${e}`);m(),console.log(o),window.alert("Estufa Excluída")}catch(o){o.response.status===401&&window.alert("Usuário não autenticado"),window.alert("Erro ao excluir estufa"),console.log(o)}},c=s(!1),l=s({nome:"",localizacao:"",capacidade:0}),d=s(!0),F=()=>{document.getElementById("capacidadeEstufa").value<="0"?d.value=!0:d.value=!1},S=async()=>{r.value=!0;try{const e=await h.post(`${k}/addestufa`,l.value);e.status===200&&(v.value.push({id:e.data.id,...l.value,dadosEstufa:{temperatura:0,umidade:0,consumo_agua:0,timestamp:new Date().toLocaleString()}}),c.value=!1,d.value=!1),window.alert("Estufa adicionada"),m()}catch(e){e.response.status===401&&window.alert("Usuário não autenticado"),console.error("Erro na requisição:",e),window.alert("Erro ao adicionar estufa")}finally{r.value=!1,c.value=!1,l.value={nome:"",localizacao:"",capacidade:0}}};let i=s();i.value=!1;let x;const U=()=>{if(!localStorage.getItem("token")){window.alert("Usuário não autenticado");return}i.value=!i.value,i.value==!0?(I(),x=setInterval(I,1e4)):(clearInterval(x),console.log("Att Auto Desligada"))},I=()=>{i.value==!0?(m(),console.log("Atualizado")):console.log(i.value+" - ELSE")};let r=s(!1);const D=()=>{if(!localStorage.getItem("token")){window.alert("Usuário não autenticado");return}c.value=!0,r=s(!0)},A=()=>{c.value=!1,r=s(!1),m()};return(e,o)=>{const L=B;return _(),p(C,null,[q(L),a("div",R,[a("div",null,[a("button",{class:"button",onClick:m},"Listar Estufas"),a("button",{style:y([{width:"125px"},{backgroundColor:b(i)?"Green":"Red"}]),class:"button",onClick:U},"Tempo Real",4)]),G,a("div",H,[a("button",{class:"button_include",onClick:D,style:y({backgroundColor:b(r)?"gray":"#007BFF",cursor:b(r)?"not-allowed":"pointer"}),disabled:b(r)},"Incluir Estufa",12,j),c.value?(_(),p("button",{key:0,class:"button_include",onClick:A},"Cancelar")):w("",!0)]),c.value?(_(),p("form",{key:0,class:"form-incluirEstufa",onSubmit:N(S,["prevent"])},[K,E(a("input",{class:"inputsForm",type:"text","onUpdate:modelValue":o[0]||(o[0]=t=>l.value.nome=t),required:""},null,512),[[g,l.value.nome]]),O,E(a("input",{class:"inputsForm",type:"text","onUpdate:modelValue":o[1]||(o[1]=t=>l.value.localizacao=t),required:""},null,512),[[g,l.value.localizacao]]),P,E(a("input",{class:"inputsForm",style:{width:"75px"},type:"number",onInput:F,id:"capacidadeEstufa","onUpdate:modelValue":o[2]||(o[2]=t=>l.value.capacidade=t),required:""},null,544),[[g,l.value.capacidade]]),a("button",{class:"button",type:"submit",style:y({backgroundColor:d.value?"gray":"#007BFF",cursor:d.value?"not-allowed":"pointer"}),disabled:d.value},"Adicionar Estufa",12,Q)],40,J)):w("",!0),v.value.length!==0?(_(),p("div",W,[a("table",X,[Y,a("tbody",null,[(_(!0),p(C,null,$(v.value,t=>(_(),p("tr",{key:t.id},[Z,a("td",null,n(t.id),1),a("td",null,n(t.nome),1),a("td",null,n(t.localizacao),1),a("td",null,n(t.capacidade),1),a("td",null,n(t.dadosEstufa.temperatura)+" Cº",1),a("td",null,n(t.dadosEstufa.umidade)+"%",1),a("td",null,n(t.dadosEstufa.consumo_agua)+"L/h",1),a("td",null,n(t.dadosEstufa.timestamp),1),a("td",null,[a("button",{class:"button_delete",onClick:la=>z(t.id)},"Deletar",8,aa)])]))),128))])])])):w("",!0),ta,ea])],64)}}},ia=V(oa,[["__scopeId","data-v-3d0ef288"]]);export{ia as default};
