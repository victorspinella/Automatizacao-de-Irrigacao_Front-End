{"version":3,"file":"relatorios-67463049.js","sources":["../../../../pages/relatorios.vue"],"sourcesContent":["<template>\r\n  <Header />\r\n  <div class=\"table-pesquisa\">\r\n    <table class=\"custom-table-pesquisa\">\r\n      <thead>\r\n        <tr>\r\n          <th>Data Incial</th>\r\n          <th>Data Final</th>\r\n        </tr>\r\n      </thead>\r\n      <tbody>\r\n        <tr>\r\n          <td class=\"table-pesquisa-datas\"><input v-model=\"dataInicio\" class=\"datas\" type=\"date\" id=\"dataInicio\"></td>\r\n          <td class=\"table-pesquisa-datas\"><input v-model=\"dataFinal\" class=\"datas\" type=\"date\" id=\"dataFinal\"></td>\r\n          <td><button class=\"button\" @click=\"listarRelatorios\">Listar Relatórios</button></td>\r\n        </tr>\r\n      </tbody>\r\n    </table>\r\n  </div>\r\n\r\n  <div class=\"page-container\">\r\n    <br>\r\n    <div v-if=\"listaRelatorios.length !== 0\" class=\"table-container\">\r\n      <table class=\"custom-table\">\r\n        <thead>\r\n          <tr>\r\n            <th>ID Estufa</th>\r\n            <th>Nome Estufa</th>\r\n            <th>Localização</th>\r\n            <th>Capacidade</th>\r\n            <th>Umidade (%)</th>\r\n            <th>Temperatura (°C)</th>\r\n            <th>Data</th>\r\n            <th>Hora</th>\r\n          </tr>\r\n        </thead>\r\n        <tbody>\r\n          <tr v-for=\"relatorio in listaRelatorios\" :key=\"relatorio.id\">\r\n            <td>{{ relatorio.estufa.id }}</td>\r\n            <td>{{ relatorio.estufa.nome }}</td>\r\n            <td>{{ relatorio.estufa.localizacao }}</td>\r\n            <td>{{ relatorio.estufa.capacidade }}</td>\r\n            <td>{{ relatorio.umidade }}%</td>\r\n            <td>{{ relatorio.temperatura }}°C</td>\r\n            <td>{{ formatDate(relatorio.data) }}</td>\r\n            <td>{{ relatorio.hora }}</td>\r\n            <td><button class=\"button-delete\" @click=\"excluirRelatorio(relatorio.id)\"> Excluir</button></td>\r\n          </tr>\r\n        </tbody>\r\n      </table>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script setup>\r\nimport { ref } from 'vue';\r\nimport { api } from '../infra/axios-config'\r\nconst listaRelatorios = ref([])\r\nconst urlRelatorios = ref()\r\nconst dataInicio = ref(null);\r\nconst dataFinal = ref(null);\r\n\r\nconst urlPrincipal = 'http://localhost:4000'\r\n\r\n\r\nconst listarRelatorios = async () => {\r\n\r\n  urlRelatorios.value = `${urlPrincipal}/relatorios?dataInicio=${dataInicio.value}&dataFim=${dataFinal.value}`;\r\n\r\n  if (!dataInicio.value && !dataFinal.value) {\r\n    urlRelatorios.value = `${urlPrincipal}/relatorio`;\r\n  } else if (!dataInicio.value || !dataFinal.value) {\r\n    window.alert(\"Selecione as duas datas\")\r\n    return\r\n  }\r\n\r\n\r\n\r\n  try {\r\n    // Faz a requisição GET para a API usando o Fetch API\r\n    const response = await api.get(urlRelatorios.value)\r\n    console.log(response)\r\n\r\n    listaRelatorios.value = response.data;\r\n\r\n  } catch (error) {\r\n    console.error('Erro ao buscar dados:', error);\r\n    if (error.response.status === 401) {\r\n      window.alert('Usuário não autenticado')\r\n    }\r\n  }\r\n}\r\n\r\nconst excluirRelatorio = async (id) => {\r\n  try {\r\n\r\n    const response = await api.delete(`${urlPrincipal}/deleterelatorio/${id}`)\r\n    listarRelatorios()\r\n    console.log(response)\r\n    window.alert(\"Relatório Excluído\")\r\n  } catch (error) {\r\n    if (error.response.status === 401) {\r\n      window.alert('Usuário não autenticado')\r\n    }\r\n    window.alert(\"Erro ao excluir relatório\")\r\n    console.log(error)\r\n  }\r\n}\r\n\r\nconst formatDate = (input) => {\r\n  var datePart = input.match(/\\d+/g),\r\n    year = datePart[0],\r\n    month = datePart[1], day = datePart[2];\r\n\r\n  return day + '/' + month + '/' + year;\r\n}\r\n\r\n\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n.table-pesquisa {\r\n  display: flex;\r\n  justify-content: center;\r\n  align-items: center;\r\n  column-gap: 5%;\r\n  padding-top: 5%;\r\n}\r\n\r\n.datas {\r\n  border: 2px solid black;\r\n  padding: 10px;\r\n  border-radius: 5px;\r\n}\r\n\r\n.table-pesquisa-datas {\r\n  padding-right: 100%;\r\n}\r\n\r\n.page-container {\r\n  display: flex;\r\n  justify-content: flex-start;\r\n  align-items: center;\r\n  height: 100vh;\r\n  flex-direction: column;\r\n}\r\n\r\n.table-container {\r\n  width: 80%;\r\n  margin-top: 20px;\r\n  overflow-y: auto;\r\n  /* Adiciona a barra de rolagem vertical */\r\n}\r\n\r\n\r\n.custom-table {\r\n  width: 100%;\r\n  /* Ajustado para 100% para preencher o contêiner */\r\n  border-collapse: collapse;\r\n}\r\n\r\n.custom-table-pesquisa {\r\n  width: 60%;\r\n  /* Ajustado para 100% para preencher o contêiner */\r\n  border-collapse: collapse;\r\n}\r\n\r\n.custom-table-pesquisa th,\r\n.custom-table-pesquisa td {\r\n  text-align: start;\r\n}\r\n\r\n.custom-table th,\r\n.custom-table td {\r\n  border: 1px solid #ddd;\r\n  padding: 8px;\r\n  text-align: center;\r\n}\r\n\r\n.custom-table th {\r\n  background-color: #f2f2f2;\r\n  font-weight: bold;\r\n}\r\n\r\n.button {\r\n  margin: 10px;\r\n  padding: 10px 20px;\r\n  background-color: #007BFF;\r\n  color: #fff;\r\n  border: none;\r\n  border-radius: 5px;\r\n  cursor: pointer;\r\n  transition: background-color 0.3s ease;\r\n  width: 170px;\r\n}\r\n\r\n.button:hover {\r\n  background-color: #75aae2;\r\n}\r\n\r\n.button-delete {\r\n  margin: 10px;\r\n  padding: 10px 20px;\r\n  background-color: #007BFF;\r\n  color: #fff;\r\n  border: none;\r\n  border-radius: 5px;\r\n  cursor: pointer;\r\n  transition: background-color 0.3s ease;\r\n  width: 100px;\r\n}\r\n\r\n.button-delete:hover {\r\n  background-color: #75aae2;\r\n}\r\n\r\n\r\n.manual-buttons button {\r\n  margin: 5px;\r\n  padding: 10px 20px;\r\n  background-color: #007BFF;\r\n  color: #fff;\r\n  border: none;\r\n  border-radius: 5px;\r\n  cursor: pointer;\r\n  transition: background-color 0.3s ease;\r\n  width: 100px;\r\n}\r\n\r\n.manual-buttons button:hover {\r\n  background-color: #75aae2;\r\n}</style>\r\n"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;AAyDA,UAAM,kBAAkB,IAAI,EAAE;AACR,QAAK;AAC3B,UAAM,aAAa,IAAI,IAAI;AAC3B,UAAM,YAAY,IAAI,IAAI;AAiD1B,UAAM,aAAa,CAAC,UAAU;AAC5B,UAAI,WAAW,MAAM,MAAM,MAAM,GAC/B,OAAO,SAAS,CAAC,GACjB,QAAQ,SAAS,CAAC,GAAG,MAAM,SAAS,CAAC;AAEvC,aAAO,MAAM,MAAM,QAAQ,MAAM;AAAA,IACnC;;;;;;;;;;;;;;;;;;;;;;;;;;"}